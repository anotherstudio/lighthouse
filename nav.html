<ul class="site-header__grid grid gutter-x items-center list-reset">
	<li class="col-4">
		<a href="/">
			<img
				loading="lazy"
				class="site-header__logo"
				alt="Lighthouse logo"
				src="assets/images/header__logo.svg"
			/>
		</a>
	</li>
	<li class="col-4">
		<a href="" class="heading--eyebrow site-header__link"></a>
	</li>
	<li class="col-4">
		<a href="" class="heading--eyebrow site-header__link"></a>
	</li>
</ul>

<script>
	function setActiveNav() {
		const currentPath = window.location.pathname;
		const navLinks = document.querySelectorAll(".site-header__link");

		navLinks.forEach((link) => {
			if (link.getAttribute("href") === currentPath) {
				link.classList.add("active");
			}
		});
	}

	setActiveNav();
</script>

<script>
	const apiUrl = "http://localhost:1337";
	const authToken = "Bearer 27aa65d479599088d229e28e00b83a035fcea9641173a48034674b1c2dbdc6e36bc7e5c81bf85b631e78fdf55258aa1ef04be0d8a68b7584968c8c12af3277112dd80fdc685b4d28574c7ada171fc9bc994b25fa558516514ef535069750405821c4cc4ed17f203c5c7eb8f4426bc215ccedb60c7f38cfa5e9965b09721a5027";
	const endpoint = "global";
	const populatedData = "?populate=navigation.links";

	fetch(`${apiUrl}/api/${endpoint}${populatedData}`, {
		headers: {
			Authorization: authToken,
		},
	})
		.then((response) => {
			if (!response.ok) {
				throw new Error(`HTTP error! Status: ${response.status}`);
			}
			return response.json();
		})
		.then((data) => {
			const navigationLinks = data.data.attributes.navigation.links;

			navigationLinks.forEach((link, index) => {
				const navLinkElements = document.querySelectorAll(
					"#nav-placeholder .site-header__link"
				);

				if (index < navLinkElements.length) {
					navLinkElements[index].setAttribute("href", link.href);
					navLinkElements[index].textContent = link.label;
				}
			});
		})
		.catch((error) => {
			console.error("Error fetching data:", error);
		});
</script>
