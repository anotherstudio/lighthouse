<div class="site-footer__grid--top grid gutter-x mw-container mx-auto">
	<div class="col-4 pr-md">
		<img
			loading="lazy"
			class="site-footer__logo"
			src="assets/images/logo--color.svg"
			alt="Lighthouse logo"
		/>
		<div class="col-4 m-visible l-hidden">
			<div class="heading--block"></div>
			<div class="mt-sm">
				<a class="button" href="mailto:{{footer.button.href}}">
					{{footer.button.text}}
				</a>
			</div>
			<ul class="social-links list-reset">
				<li>
					<a
						aria-label="Access social network"
						class="social-link"
						target="_blank"
						href="{{footer.facebookLink}}"
					>
						<svg
							width="40"
							height="40"
							viewBox="0 0 40 40"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<g clip-path="url(#clip0_4592_2796)">
								<path
									d="M40 20C40 8.95312 31.0469 0 20 0C8.95313 0 0 8.95312 0 20C0 29.9844 7.3125 38.2578 16.875 39.7578V25.7812H11.7969V20H16.875V15.5937C16.875 10.582 19.8594 7.8125 24.4297 7.8125C26.6172 7.8125 28.9062 8.20312 28.9062 8.20312V13.125H26.3828C23.8984 13.125 23.125 14.668 23.125 16.25V20H28.6719L27.7852 25.7812H23.125V39.7578C32.6875 38.2578 40 29.9844 40 20Z"
									fill="currentColor"
								/>
							</g>
						</svg>
					</a>
				</li>
				<li>
					<a
						aria-label="Access social network"
						class="social-link"
						target="_blank"
						href="{{footer.linkedinLink}}"
					>
						<svg
							width="41"
							height="40"
							viewBox="0 0 41 40"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<path
								fill-rule="evenodd"
								clip-rule="evenodd"
								d="M20.9043 0C9.8586 0 0.904297 8.9543 0.904297 20C0.904297 31.0457 9.8586 40 20.9043 40C31.95 40 40.9043 31.0457 40.9043 20C40.9043 8.9543 31.95 0 20.9043 0ZM10.5067 16.5646H15.0391V30.1827H10.5067V16.5646ZM15.3375 12.3521C15.308 11.0168 14.3532 9.99981 12.8027 9.99981C11.2522 9.99981 10.2385 11.0168 10.2385 12.3521C10.2385 13.6596 11.2222 14.7059 12.7438 14.7059H12.7728C14.3532 14.7059 15.3375 13.6596 15.3375 12.3521ZM26.166 16.2449C29.1486 16.2449 31.3845 18.1917 31.3845 22.3746L31.3844 30.1828H26.8521V22.8971C26.8521 21.0671 26.1962 19.8184 24.5555 19.8184C23.3033 19.8184 22.5575 20.6602 22.2299 21.4733C22.11 21.7647 22.0806 22.1707 22.0806 22.5777V30.1832H17.5476C17.5476 30.1832 17.6074 17.8429 17.5476 16.5651H22.0806V18.494C22.6822 17.5667 23.7596 16.2449 26.166 16.2449Z"
								fill="currentColor"
							/>
						</svg>
					</a>
				</li>
			</ul>
		</div>
	</div>
	<nav class="footer-nav col-4 pr-md">
		<ul class="footer-nav__items list-reset">
			<li>
				<a
					class="footer-nav__link footer__about"
					href="{{navigation.href}}"
					>{{navigation.label}}</a
				>
			</li>
			<li>
				<a
					class="footer-nav__link footer__services"
					href="{{navigation.href}}"
					>{{navigation.label}}</a
				>
				<ul class="footer-nav__subitems list-reset"></ul>
			</li>
		</ul>

		<div class="col-4 m-hidden">
			<div class="heading--block"></div>
			<div class="mt-sm">
				<a class="button" href="mailto:{{footer.button.href}}">
					{{footer.button.text}}
				</a>
			</div>
			<ul class="social-links list-reset">
				<li>
					<a
						aria-label="Access social network"
						class="social-link"
						target="_blank"
						href="{{footer.facebookLink}}"
					>
						<svg
							width="40"
							height="40"
							viewBox="0 0 40 40"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<g clip-path="url(#clip0_4592_2796)">
								<path
									d="M40 20C40 8.95312 31.0469 0 20 0C8.95313 0 0 8.95312 0 20C0 29.9844 7.3125 38.2578 16.875 39.7578V25.7812H11.7969V20H16.875V15.5937C16.875 10.582 19.8594 7.8125 24.4297 7.8125C26.6172 7.8125 28.9062 8.20312 28.9062 8.20312V13.125H26.3828C23.8984 13.125 23.125 14.668 23.125 16.25V20H28.6719L27.7852 25.7812H23.125V39.7578C32.6875 38.2578 40 29.9844 40 20Z"
									fill="currentColor"
								/>
							</g>
						</svg>
					</a>
				</li>
				<li>
					<a
						aria-label="Access social network"
						class="social-link"
						target="_blank"
						href="{{footer.linkedinLink}}"
					>
						<svg
							width="41"
							height="40"
							viewBox="0 0 41 40"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<path
								fill-rule="evenodd"
								clip-rule="evenodd"
								d="M20.9043 0C9.8586 0 0.904297 8.9543 0.904297 20C0.904297 31.0457 9.8586 40 20.9043 40C31.95 40 40.9043 31.0457 40.9043 20C40.9043 8.9543 31.95 0 20.9043 0ZM10.5067 16.5646H15.0391V30.1827H10.5067V16.5646ZM15.3375 12.3521C15.308 11.0168 14.3532 9.99981 12.8027 9.99981C11.2522 9.99981 10.2385 11.0168 10.2385 12.3521C10.2385 13.6596 11.2222 14.7059 12.7438 14.7059H12.7728C14.3532 14.7059 15.3375 13.6596 15.3375 12.3521ZM26.166 16.2449C29.1486 16.2449 31.3845 18.1917 31.3845 22.3746L31.3844 30.1828H26.8521V22.8971C26.8521 21.0671 26.1962 19.8184 24.5555 19.8184C23.3033 19.8184 22.5575 20.6602 22.2299 21.4733C22.11 21.7647 22.0806 22.1707 22.0806 22.5777V30.1832H17.5476C17.5476 30.1832 17.6074 17.8429 17.5476 16.5651H22.0806V18.494C22.6822 17.5667 23.7596 16.2449 26.166 16.2449Z"
								fill="currentColor"
							/>
						</svg>
					</a>
				</li>
			</ul>
		</div>
	</nav>
	<div class="col-4 l-visible">
		<div class="heading--block"></div>
		<div class="mt-sm">
			<a class="button" href="mailto:{{footer.button.href}}">
				{{footer.button.text}}
			</a>
		</div>
		<ul class="social-links list-reset">
			<li>
				<a
					aria-label="Access social network"
					class="social-link"
					target="_blank"
					href="{{footer.facebookLink}}"
				>
					<svg
						width="40"
						height="40"
						viewBox="0 0 40 40"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
					>
						<g clip-path="url(#clip0_4592_2796)">
							<path
								d="M40 20C40 8.95312 31.0469 0 20 0C8.95313 0 0 8.95312 0 20C0 29.9844 7.3125 38.2578 16.875 39.7578V25.7812H11.7969V20H16.875V15.5937C16.875 10.582 19.8594 7.8125 24.4297 7.8125C26.6172 7.8125 28.9062 8.20312 28.9062 8.20312V13.125H26.3828C23.8984 13.125 23.125 14.668 23.125 16.25V20H28.6719L27.7852 25.7812H23.125V39.7578C32.6875 38.2578 40 29.9844 40 20Z"
								fill="currentColor"
							/>
						</g>
					</svg>
				</a>
			</li>
			<li>
				<a
					aria-label="Access social network"
					class="social-link"
					target="_blank"
					href="{{footer.linkedinLink}}"
				>
					<svg
						width="41"
						height="40"
						viewBox="0 0 41 40"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
					>
						<path
							fill-rule="evenodd"
							clip-rule="evenodd"
							d="M20.9043 0C9.8586 0 0.904297 8.9543 0.904297 20C0.904297 31.0457 9.8586 40 20.9043 40C31.95 40 40.9043 31.0457 40.9043 20C40.9043 8.9543 31.95 0 20.9043 0ZM10.5067 16.5646H15.0391V30.1827H10.5067V16.5646ZM15.3375 12.3521C15.308 11.0168 14.3532 9.99981 12.8027 9.99981C11.2522 9.99981 10.2385 11.0168 10.2385 12.3521C10.2385 13.6596 11.2222 14.7059 12.7438 14.7059H12.7728C14.3532 14.7059 15.3375 13.6596 15.3375 12.3521ZM26.166 16.2449C29.1486 16.2449 31.3845 18.1917 31.3845 22.3746L31.3844 30.1828H26.8521V22.8971C26.8521 21.0671 26.1962 19.8184 24.5555 19.8184C23.3033 19.8184 22.5575 20.6602 22.2299 21.4733C22.11 21.7647 22.0806 22.1707 22.0806 22.5777V30.1832H17.5476C17.5476 30.1832 17.6074 17.8429 17.5476 16.5651H22.0806V18.494C22.6822 17.5667 23.7596 16.2449 26.166 16.2449Z"
							fill="currentColor"
						/>
					</svg>
				</a>
			</li>
		</ul>
	</div>
</div>
<div class="footer-legal grid gutter-x mw-container mx-auto">
	<div class="col col-4"></div>
	<div class="col col-8">
		<div class="pb-sm">
			<strong
				>Copyright Â© <span id="year"></span> Lighthouse. All rights
				reserved.</strong
			><br /><br />
			<span class="terms-and-conditions">{{footer.termsConditions}}</span>
		</div>
		<div class="footer-by flex items-end">
			Website by
			<strong
				><a href="https://weareanother.studio/" target="_blank"
					><img
						loading="lazy"
						src="assets/images/Another_Studio.svg"
						alt="Another Studio logo" /></a
			></strong>
			&
			<strong
				><a href="https://thumbstack.co.nz/" target="_blank"
					>THUMBSTACK</a
				></strong
			>
		</div>
	</div>
</div>

<script>
	document.getElementById("year").innerHTML = new Date().getFullYear();
</script>

<script>
	const apiUrl = "http://localhost:1337";
	const authToken =
		"Bearer 27aa65d479599088d229e28e00b83a035fcea9641173a48034674b1c2dbdc6e36bc7e5c81bf85b631e78fdf55258aa1ef04be0d8a68b7584968c8c12af3277112dd80fdc685b4d28574c7ada171fc9bc994b25fa558516514ef535069750405821c4cc4ed17f203c5c7eb8f4426bc215ccedb60c7f38cfa5e9965b09721a5027";

	async function fetchData(endpoint, populatedData, callback) {
		try {
			const response = await fetch(
				`${apiUrl}/api/${endpoint}${populatedData}`,
				{
					headers: {
						Authorization: authToken,
					},
				}
			);

			if (!response.ok) {
				throw new Error(`HTTP error! Status: ${response.status}`);
			}

			const responseJson = await response.json();
			const data = responseJson.data.attributes;
			callback(data);
		} catch (error) {
			console.error("Error fetching data:", error);
		}
	}

	function updateGlobalData(data) {
		document
			.querySelectorAll("#footer-placeholder .heading--block")
			.forEach((el) => {
				el.textContent = data.footer.heading;
			});

		document
			.querySelectorAll("#footer-placeholder .button")
			.forEach((el) => {
				el.href = `mailto:${data.footer.button.href}`;
				el.classList.add(`button--${data.footer.button.theme}`);
				el.textContent = data.footer.button.text;
			});

		document
			.querySelectorAll(
				'#footer-placeholder a[href="{{footer.facebookLink}}"]'
			)
			.forEach((el) => {
				el.href = data.footer.facebookLink;
			});

		document
			.querySelectorAll(
				'#footer-placeholder a[href="{{footer.linkedinLink}}"]'
			)
			.forEach((el) => {
				el.href = data.footer.linkedinLink;
			});

		const aboutEl = document.querySelector(
			"#footer-placeholder .footer__about"
		);
		aboutEl.href = data.navigation.links[0].href;
		aboutEl.textContent = data.navigation.links[0].label;

		const servicesEl = document.querySelector(
			"#footer-placeholder .footer__services"
		);
		servicesEl.href = data.navigation.links[1].href;
		servicesEl.textContent = data.navigation.links[1].label;

		const termsEl = document.querySelector(
			"#footer-placeholder .terms-and-conditions"
		);
		termsEl.textContent = data.footer.termsConditions;
	}

	function updateServicesData(data) {
		const services = data.services;
		const list = document.querySelector(".footer-nav__subitems");
		list.innerHTML = "";

		services.forEach((service, index) => {
			const listItem = document.createElement("li");
			listItem.classList.add("footer-nav__subitem");

			const anchor = document.createElement("a");
			anchor.classList.add("footer-nav__sublink");
			anchor.href = `/services#content-${index + 1}`;
			anchor.textContent = service.title;

			listItem.appendChild(anchor);
			list.appendChild(listItem);
		});
	}

	fetchData(
		"global",
		"?populate=navigation.links,footer,footer.button",
		updateGlobalData
	);
	fetchData("services-page", "?populate=services", updateServicesData);
</script>
